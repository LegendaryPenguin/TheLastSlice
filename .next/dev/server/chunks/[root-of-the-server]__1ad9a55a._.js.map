{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nisch/Desktop/pizza-raid/src/lib/supabaseServer.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport function supabaseServer() {\r\n  return createClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.SUPABASE_SERVICE_ROLE_KEY!,\r\n    {\r\n      auth: { persistSession: false },\r\n    }\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,gMAAY,gFAEjB,QAAQ,GAAG,CAAC,yBAAyB,EACrC;QACE,MAAM;YAAE,gBAAgB;QAAM;IAChC;AAEJ"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nisch/Desktop/pizza-raid/src/lib/utils.ts"],"sourcesContent":["export function nowMs() {\r\n  return Date.now();\r\n}\r\n\r\nexport function clamp(n: number, a: number, b: number) {\r\n  return Math.max(a, Math.min(b, n));\r\n}\r\n\r\nexport function isFiveDigits(tag: string) {\r\n  return /^[0-9]{5}$/.test(tag);\r\n}\r\n\r\nexport function cleanName(s: string) {\r\n  return s.trim().replace(/\\s+/g, \" \");\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAO,SAAS;IACd,OAAO,KAAK,GAAG;AACjB;AAEO,SAAS,MAAM,CAAS,EAAE,CAAS,EAAE,CAAS;IACnD,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG;AACjC;AAEO,SAAS,aAAa,GAAW;IACtC,OAAO,aAAa,IAAI,CAAC;AAC3B;AAEO,SAAS,UAAU,CAAS;IACjC,OAAO,EAAE,IAAI,GAAG,OAAO,CAAC,QAAQ;AAClC"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nisch/Desktop/pizza-raid/src/app/api/raid/join/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { supabaseServer } from \"@/lib/supabaseServer\";\r\nimport { cleanName, isFiveDigits } from \"@/lib/utils\";\r\n\r\nexport async function POST(req: Request) {\r\n  const sb = supabaseServer();\r\n  const body = await req.json();\r\n\r\n  const code = String(body.code || \"\").toUpperCase().trim();\r\n  const first = cleanName(String(body.firstName || \"\"));\r\n  const last = cleanName(String(body.lastName || \"\"));\r\n  const tag = String(body.tag || \"\").trim();\r\n\r\n  if (!code || !first || !last || !isFiveDigits(tag)) {\r\n    return NextResponse.json({ error: \"Invalid join fields.\" }, { status: 400 });\r\n  }\r\n\r\n  const displayName = `${first} ${last} #${tag}`;\r\n\r\n  const { data: raid, error: raidErr } = await sb\r\n    .from(\"raids\")\r\n    .select(\"*\")\r\n    .eq(\"code\", code)\r\n    .single();\r\n\r\n  if (raidErr || !raid) {\r\n    return NextResponse.json({ error: \"Raid not found.\" }, { status: 404 });\r\n  }\r\n\r\n  if (raid.status === \"ended\") {\r\n  return NextResponse.json({ error: \"Raid already ended.\" }, { status: 409 });\r\n}\r\n\r\n\r\n  const { data: player, error: pErr } = await sb\r\n    .from(\"players\")\r\n    .insert({\r\n      raid_id: raid.id,\r\n      first_name: first,\r\n      last_name: last,\r\n      tag,\r\n      display_name: displayName,\r\n      energy: 100,\r\n    })\r\n    .select(\"*\")\r\n    .single();\r\n\r\n  if (pErr) {\r\n    return NextResponse.json({ error: pErr.message }, { status: 500 });\r\n  }\r\n\r\n  return NextResponse.json({ raid, player });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,KAAK,IAAA,gJAAc;IACzB,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,MAAM,OAAO,OAAO,KAAK,IAAI,IAAI,IAAI,WAAW,GAAG,IAAI;IACvD,MAAM,QAAQ,IAAA,kIAAS,EAAC,OAAO,KAAK,SAAS,IAAI;IACjD,MAAM,OAAO,IAAA,kIAAS,EAAC,OAAO,KAAK,QAAQ,IAAI;IAC/C,MAAM,MAAM,OAAO,KAAK,GAAG,IAAI,IAAI,IAAI;IAEvC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAA,qIAAY,EAAC,MAAM;QAClD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;IAEA,MAAM,cAAc,GAAG,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,KAAK;IAE9C,MAAM,EAAE,MAAM,IAAI,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,GAC1C,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,QAAQ,MACX,MAAM;IAET,IAAI,WAAW,CAAC,MAAM;QACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACvE;IAEA,IAAI,KAAK,MAAM,KAAK,SAAS;QAC7B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAsB,GAAG;YAAE,QAAQ;QAAI;IAC3E;IAGE,MAAM,EAAE,MAAM,MAAM,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,GACzC,IAAI,CAAC,WACL,MAAM,CAAC;QACN,SAAS,KAAK,EAAE;QAChB,YAAY;QACZ,WAAW;QACX;QACA,cAAc;QACd,QAAQ;IACV,GACC,MAAM,CAAC,KACP,MAAM;IAET,IAAI,MAAM;QACR,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,KAAK,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IAClE;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE;QAAM;IAAO;AAC1C"}}]
}